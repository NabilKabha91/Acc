<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html">
<head>
<composite:interface>
	<composite:attribute name="title" required="true" />
	<composite:attribute name="addBills" required="true" default="true"
		type="java.lang.Boolean"
		shortDescription="true for add company, false for edit " />


</composite:interface>

</head>
<body>
	<composite:implementation>

		<div class="ui-g ui-fluid">
			<div class="ui-g-12 ui-lg-12">
				<!-- Left Side -->
				<div class="card">
					<div>
						<h1 align="center" style="font-weight: bolder">#{purchaseOrderMB.purchaseOrder.documentType}</h1>

						<div
							style="box-shadow: 3px 3px 3px 3px #888888; width: 150px; display: grid; float: left;">
							<table cellpadding="4" cellspacing="0"
								style="border: none; border-collapse: collapse;">
								<tr
									style="background-color: #e0e0e0; padding: 0.5em; font-weight: bolder">
									<td><h:outputLabel value="#{msg['Balance']}"
											style=";font-size: 20px;font-weight:bold;">
										</h:outputLabel></td>
								</tr>
								<tr>
									<td><h:outputLabel rendered="#{purchaseOrderMB.purchaseOrder.commodityServices eq 2}"
								style="color: Orange;font-size: 25px;font-weight:bold;" value="#{purchaseOrderMB.addPurchaseOrderList.stream().map(s->s.total).sum()}"   >
																						 <f:convertNumber pattern="###,###.##"/> </h:outputLabel></td>
								
									<!--  	</h:outputLabel></td>
								<td>		<h:outputLabel rendered="#{purchaseOrderMB.purchaseOrder.commodityServices eq 1}"
								style="color: Orange;font-size: 25px;font-weight:bold;" value="#{purchaseOrderMB.addMaterialsList.stream().map(s->s.total).sum()}"   >
																						 <f:convertNumber pattern="###,###.##"/>
								
										</h:outputLabel>	</td> -->
								</tr>
								<tr>
								<td>		<h:outputLabel rendered="#{purchaseOrderMB.purchaseOrder.commodityServices eq 1}"
								style="color: Orange;font-size: 25px;font-weight:bold;" value="#{purchaseOrderMB.addMaterialsList.stream().map(s->s.total).sum()}"   >
																						 <f:convertNumber pattern="###,###.##"/>
								
										</h:outputLabel>	</td>
								</tr>

							</table>
						</div>

					</div>
					<br></br> <br></br>



					<p:panelGrid columns="2" styleClass="ui-noborder Wid120">
						<label style="font-weight: bolder;">#{msg['Supplier_Name']}*:</label>
						<div></div>
						<p:selectOneMenu id="bonusesList3"
							value="#{purchaseOrderMB.purchaseOrder.suppliers}"
							style="margin-bottom:10px;width:180px"
							converter="omnifaces.SelectItemsConverter" required="true"
							filter="true" filterMatchMode="contains" multiple="true">
							<p:ajax event="change" process="@this" update="@parent:a,b,c,d,e" />

							<f:selectItem itemLabel="اختيار مورد " itemValue="" />
							<f:selectItem itemLabel="addNew +"
								itemValue="#{purchaseOrderMB.newItem}" />

							<f:selectItems value="#{purchaseOrderDetailsMB.suppliersList}"
								var="suppliers"
								itemLabel="#{utils.isArabic() ? suppliers.suppliersNameAr : suppliers.suppliersNameEn}"
								itemValue="#{suppliers}" />
							<p:ajax event="itemSelect" listener="#{purchaseOrderMB.addValue}">
							</p:ajax>

						</p:selectOneMenu>
						<label style="font-weight: bolder;">#{msg['Currency']}</label>
						<p:selectOneMenu id="definitionOfCurrencie3s"
							value="#{purchaseOrderMB.purchaseOrder.definitionOfCurrencies}"
							style="margin-top:8px;"
							converter="omnifaces.SelectItemsConverter" filter="true"
							filterMatchMode="contains" multiple="true">
							<f:selectItem itemLabel=" " itemValue="" />

							<f:selectItem itemLabel="addNew +"
								itemValue="#{purchaseOrderMB.addDefinitionOfCurrencies}" />

							<f:selectItems
								value="#{purchaseOrderDetailsMB.definitionOfCurrenciesList}"
								var="definitionOfCurrenciesList"
								itemLabel="#{utils.isArabic() ? definitionOfCurrenciesList.definitionOfCurrenciesName : definitionOfCurrenciesList.definitionOfCurrenciesNameEn} "
								itemValue="#{definitionOfCurrenciesList}" />
							<p:ajax event="itemSelect"
								listener="#{purchaseOrderMB.addDefinitionOfCurrencie}">
							</p:ajax>

						</p:selectOneMenu>


					</p:panelGrid>
					<br></br>

					<div style="box-shadow: 3px 3px 3px 3px #888888; display: grid;">

						<table cellpadding="4" cellspacing="0"
							style='border-collapse: collapse; border: none'>
							<tr
								style="background-color: #e0e0e0; padding: 0.5em; font-weight: bolder">
								<td>#{msg['supplierCode']}</td>
								<td>#{msg['addCompany.address']}</td>
								<td>#{msg['addCompany.phone_number']}</td>
								<td>#{msg['Sales_Tax_Number_'+=utils.getVersion()]}</td>
								<td>#{msg['addCustomer.customerIdNumber_'+=utils.getVersion()]}</td>
							</tr>

							<tr>
								<td><h:outputLabel
										value="#{purchaseOrderMB.purchaseOrder.suppliers.previousCode eq null?0:purchaseOrderMB.purchaseOrder.suppliers.previousCode}"
										id="a">

									</h:outputLabel></td>
								<td><h:outputLabel
										value="#{purchaseOrderMB.purchaseOrder.suppliers.address eq null?'':purchaseOrderMB.purchaseOrder.suppliers.address}"
										id="b">
									</h:outputLabel></td>
								<td><h:outputLabel
										value="#{purchaseOrderMB.purchaseOrder.suppliers.phoneNumber eq null?0:purchaseOrderMB.purchaseOrder.suppliers.phoneNumber}"
										id="c">
									</h:outputLabel></td>
								<td><h:outputLabel
										value="#{purchaseOrderMB.purchaseOrder.suppliers.saleTaxNumber eq null?0:purchaseOrderMB.purchaseOrder.suppliers.saleTaxNumber}"
										id="d">
									</h:outputLabel></td>
								<td><h:outputLabel
										value="#{purchaseOrderMB.purchaseOrder.suppliers.suppliersIdNumber eq null?0:purchaseOrderMB.purchaseOrder.suppliers.suppliersIdNumber}"
										id="e">
									</h:outputLabel></td>

							</tr>


						</table>

					</div>
					<br></br>
					<p:panelGrid columns="4" styleClass="ui-noborder Wid120">
						<label style="font-weight: bolder;">#{msg['purchaseBillNum']}</label>
						<h:outputText value="#{purchaseOrderMB.purchaseOrder.purchaseBillsNumber}" />         

						<label style="font-weight: bolder;">#{msg['supplierVoucherNum']}</label>
						<h:inputText value="#{purchaseOrderMB.purchaseOrder.billsSuppliersNumber}" />  
					</p:panelGrid>


					<br></br>

			<!--  	<div style="box-shadow: 3px 3px 3px 3px #888888; display: grid">
						<table cellpadding="4" cellspacing="0"
							style='border-collapse: collapse; border: none'>
							<tr
								style="background-color: #e0e0e0; padding: 0.5em; font-weight: bolder;">
								<td width="100">#{msg['Invoice_number']}</td>
								<td width="150">#{msg['supplierVoucherNum']}</td>

							</tr>
							<tr style="padding: 20px">
								<td><h:outputText
										value="#{purchaseBillsMB.purchaseBills.purchaseBillsNumber}" /></td>
								<td>
								<h:inputText value="#{purchaseBillsMB.purchaseBills.billsSuppliersNumber}" />    
								</td>

							</tr>

						</table>

					</div> -->	


					<br></br>
					<div style="box-shadow: 3px 3px 3px 3px #888888; display: grid">
						<table cellpadding="4" cellspacing="0"
							style='border-collapse: collapse; border: none'>
							<tr
								style="background-color: #e0e0e0; padding: 0.5em; font-weight: bolder;">
								<td width="100">تاريخ امر الشراء</td>
								<td width="150">#{msg['Due_date']}</td>
							</tr>
							<tr style="padding: 20px">
								<td>   <p:calendar   value="#{purchaseOrderMB.purchaseOrder.todayDate}" pattern="yyyy/MM/dd" required="true" /></td>

								<td>  <p:calendar required="true" id="date1" pattern="dd/MM/yyyy" effect="fold" value="#{purchaseOrderMB.purchaseOrder.dueDate}" rendered="#{utils.getVersion() ne 'EGY'}" /></td>

							</tr>

						</table>

					</div>
					<br></br>

					<div>
						<p:panelGrid columns="3" styleClass="ui-noborder Wid120">
							<h:selectOneRadio id="batchtype"
								value="#{purchaseOrderMB.purchaseOrder.commodityServices}"
								style="margin-bottom:20px;margin-top:20px;font-weight:bolder"
								filter="true" filterMatchMode="contains" required="true">
								<f:selectItem itemLabel="#{msg['goods']} " itemValue="1" />
								<f:selectItem itemLabel="#{msg['services']}" itemValue="2" />
							</h:selectOneRadio>
							<p:commandButton value="#{msg['search']}" icon="ui-icon-search"
								action="#{purchaseOrderMB.refresh()}"
								style="width:auto;border-radius:20px;background-color:#888888"
								process="@form" update="@form" />
						</p:panelGrid>

					</div>



					<div style="box-shadow: 3px 3px 3px 3px #888888;">
						<p:panelGrid columns="1" id="pnl2" styleClass="ui-noborder"
							rendered="#{purchaseOrderMB.purchaseOrder.commodityServices eq 2 and purchaseOrderMB.purchaseOrder.closeMonth eq 0}">

							<p:commandButton action="#{purchaseOrderMB.addNewDetails()}"
								oncomplete="PF('bui').hide()" onstart="PF('bui').show()"
								style="width:auto;border-radius:20px;background-color:#888888"
								value="#{msg['Add_Row']} " process="@this" icon="ui-icon-plus"
								 />

							<p:commandButton value="#{msg['Calculation']}"
								style="width:auto;border-radius:20px;background-color:#888888"
								action="#{purchaseOrderMB.savePurchaseBills2()}" process="@form"
								update="@form">

							</p:commandButton>


							<p:dataTable emptyMessage="#{msg['noRecord']}" id="tblSheet"
								rowIndexVar="index" var="det" styleClass="txt-center"
								value="#{purchaseOrderMB.addPurchaseOrderList}"
								style="border:hidden;">

								<p:columnGroup type="header">
									 <p:row>
                    <p:column colspan="1" headerText="#" style="border:hidden;"/>
                    <p:column colspan="1" headerText="#{msg['Item']}"  style="border:hidden;font-size: 12px ;font-weight:bold"/>
                                        <p:column colspan="1" headerText="#{msg['ItemCode_'+=utils.getVersion()]}"  style="border:hidden;font-size: 12px ;font-weight:bold"/>
                    
                                        <p:column colspan="1" headerText="#{msg['Descreption']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                                        <p:column colspan="1" headerText=" #{msg['Unit_Price']} " style="border:hidden;font-size: 12px ;font-weight:bold"/>
                    <p:column colspan="1" headerText="#{msg['Quantity']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                    <p:column colspan="1" headerText="  #{msg['Amount_before_tax']} " style="border:hidden;font-size: 12px ;font-weight:bold"/>
                        <p:column colspan="1" headerText=" #{msg['Amount_before_tax']}  " style="border:hidden;font-size: 12px ;font-weight:bold"/>
                    
                      
                     <p:column colspan="1" headerText="#{msg['Tax_Rate']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                    <p:column colspan="1" headerText="#{msg['Tax_amount']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                    <p:column colspan="1" headerText="#{msg['Tax_amount']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                    
                    <p:column colspan="1" headerText="#{msg['Gross_Total']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                 <p:column colspan="1" headerText="#{msg['Total']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                    
                </p:row>
                <p:row>
                 <ui:repeat value="" var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>
                     <ui:repeat value="" var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>
                     <ui:repeat value="" var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>
                     <ui:repeat value="" var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;"/>
                    </ui:repeat>
                    
                    	  <ui:repeat value="#{utils.isArabic() ? purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesName : purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesNameEn}"
 var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>        
 <ui:repeat value="" var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>
                    	  <ui:repeat value="#{utils.isArabic() ? purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesName : purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesNameEn}"
 var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat> 
                    <ui:repeat value="#{purchaseOrderMB.main}"
 var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>    
                     <ui:repeat value="" var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>
                    	  <ui:repeat value="#{utils.isArabic() ? purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesName : purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesNameEn}"
 var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;"/>
                    </ui:repeat> 
                     <ui:repeat value="#{purchaseOrderMB.main}"
 var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>
                    	  <ui:repeat value="#{utils.isArabic() ? purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesName : purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesNameEn}"
 var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>    
                     <ui:repeat value="#{purchaseOrderMB.main}"
 var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>       
                    
                    
                </p:row>
            </p:columnGroup>
								
								
											   
                    <p:column headerText="#" width="20" style="border:hidden;" >
					
												<h:outputText value="#{index+1}" />
									
               						
					
											</p:column>
				
											 <p:columnGroup type="header">
                <p:row>
                    <p:column colspan="#{index+1}" headerText="#" style="border:hidden;"/>
                </p:row>
                <p:row>
                    <ui:repeat value="#{index+1}" var="year">
                        <p:column  style="border:hidden;"/>
                    </ui:repeat>
                </p:row>
            </p:columnGroup>
            
            <p:column headerText="#{msg['Item']}" width="100" style="border:hidden;" >
								<p:inputTextarea value="#{det.clause}"> 
								</p:inputTextarea>
								</p:column>
            
            	<p:column headerText="#{msg['ItemCode_'+=utils.getVersion()]}" width="50" style="border:hidden;" >
							<p:inputText value="#{det.barcode}"/>
							</p:column>	
							
            
            	<p:column headerText="#{msg['Descreption']}" width="100" style="border:hidden;" >
								<p:inputTextarea escape="false"  value="#{det.description}" autoResize="false" styleClass="Wid100" rows="3"> 
								</p:inputTextarea>
								</p:column>
											
				
								
									<p:column headerText="#{msg['Unit_Price']}" width="50" style="border:hidden;" >
							<p:inputNumber value="#{det.unitPrice}"/>
							</p:column>		
						
							<p:column headerText="#{msg['Quantity']}" width="50" style="border:hidden;" >
							<p:inputNumber value="#{det.quantity}"/>
							</p:column>	
							
								
								<p:column headerText="#{msg['Amount_before_tax']}" width="70" style="border:hidden;" >
							<h:outputText value="#{det.initialValueBeforeTax}">
														 <f:convertNumber pattern="###,###.##"/>
							</h:outputText>
							
							</p:column>	
								
									<p:column headerText="#{msg['Amount_before_tax']}" width="70" style="border:hidden;" >
							<h:outputText value="#{det.valueBeforeTax}">
														 <f:convertNumber pattern="###,###.##"/>
							</h:outputText>
							
							</p:column>	
								
								
							<p:column headerText="#{msg['Tax_Rate']} " width="50" style="border:hidden;" >
								<p:selectOneMenu  
													converter="omnifaces.SelectItemsConverter" filter="true" filterMatchMode="contains" id="agents128" value="#{det.definitionOfTax}"
													style="margin-bottom:10px;" styleClass="Wid100">
													<f:selectItem  itemLabel="#{msg['select']}" />
													<f:selectItems value="#{purchaseOrderMB.definitionOfTaxList}" 
													var="definitionOfTax" itemLabel="#{definitionOfTax.taxAmount}" itemValue="#{definitionOfTax}"  />
													
												</p:selectOneMenu>
											
							</p:column>	
						<p:column headerText=" #{msg['Tax_amount']} " width="50" style="border:hidden;" >
							<h:outputText value="#{det.initialTaxAmount}">
							 <f:convertNumber pattern="###,###.##"/>
							</h:outputText>
									
							</p:column>	
							<p:column headerText="#{msg['Tax_amount']}" width="50" style="border:hidden;" >
							<h:outputText value="#{det.taxAmount}">
							 <f:convertNumber pattern="###,###.##"/>
							</h:outputText>
									
							</p:column>	
								<p:column headerText="#{msg['Gross_Total']}   " width="50" style="border:hidden;" >
							<h:outputText value="#{det.initialTotal}">
							                <f:convertNumber pattern="###,###.##"/>
							</h:outputText>
							</p:column>
								<p:column headerText=" #{msg['Total']} " width="50" style="border:hidden;" >
							<h:outputText value="#{det.total}">
							                <f:convertNumber pattern="###,###.##"/>
							</h:outputText>
							</p:column>
							
							
								
							<p:column headerText="#{msg['Group']}  " width="50" style="border:hidden;" >
								<p:selectOneMenu 
	                 converter="omnifaces.SelectItemsConverter" filter="true"
	                  filterMatchMode="contains" id="group" value="#{det.groupingId}"
						style="margin-bottom:10px;" styleClass="Wid100">
													<f:selectItem  itemLabel="#{msg['Group']}  " />
									
													<f:selectItems value="#{purchaseOrderMB.groupList}" 
													var="grouping" itemLabel="#{utils.isArabic() ? grouping.grpDesc : grouping.grpDescEn}"  itemValue="#{grouping.grpId}"  />
													
													
												</p:selectOneMenu>
											
							</p:column>	
								<p:column   headerText="Ø­Ø°Ù"  width="30" style="border:hidden;" >
								
												<p:commandButton  styleClass="red-btn" action="#{purchaseOrderMB.delete(det)}"  process="@this" update="@form" icon="ui-icon-delete">
													<p:confirm header="#{msg['glopal.confirmation']}" message="#{msg['glopal.are_sure']}" icon="ui-icon-alert" />
												</p:commandButton>

											</p:column >	


							</p:dataTable>
						</p:panelGrid>


						<p:panelGrid columns="1" id="pnl2Bill"
							styleClass="ui-noborder Wid120"
							rendered="#{purchaseOrderMB.purchaseOrder.commodityServices eq 1 and purchaseOrderMB.purchaseOrder.closeMonth eq 0}">

							<p:commandButton action="#{purchaseOrderMB.addNewDetails()}"
								oncomplete="PF('bui').hide()" onstart="PF('bui').show()"
								style="width:auto;border-radius:20px;background-color:#888888"
								value="#{msg['Add_Row']} " process="@this" icon="ui-icon-plus" />

							<p:commandButton value="#{msg['Calculation']}"
								style="width:auto;border-radius:20px;background-color:#888888"
								action="#{purchaseOrderMB.savePurchaseBills2()}" process="@form"
								update="@form">

							</p:commandButton>


							<p:dataTable emptyMessage="#{msg['noRecord']}" id="tblSheet8"
								rowIndexVar="index" var="det" styleClass="txt-center"
								value="#{purchaseOrderMB.addPurchaseOrderList}"
								style="border:hidden;">

								<p:columnGroup type="header">
								  <p:row>
                    <p:column colspan="1" headerText="#" style="border:hidden;"/>
                    <p:column colspan="1" headerText="#{msg['Item']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                                        <p:column colspan="1" headerText="#{msg['Quantity']}"  style="border:hidden;font-size: 12px ;font-weight:bold"/>
                                        <p:column colspan="1" headerText="#{msg['Unit_Price']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                    <p:column colspan="1" headerText="#{msg['Unit_cost']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                    <p:column colspan="1" headerText="#{msg['Gross_cost_before_tax']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                                        <p:column colspan="1" headerText="#{msg['Gross_cost_before_tax']}" style="border:hidden; font-size: 12px ;font-weight:bold"/>
                    
                     <p:column colspan="1" headerText="#{msg['Tax_Rate']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                    <p:column colspan="1" headerText="#{msg['Tax_amount']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                    <p:column colspan="1" headerText="#{msg['Tax_amount']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                    
                      <p:column colspan="1" headerText="#{msg['Gross_cost']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                 <p:column colspan="1" headerText="#{msg['Gross_cost']}" style="border:hidden;font-size: 12px ;font-weight:bold"/>
                    
                </p:row>
                <p:row>
                 <ui:repeat value="" var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>
                     <ui:repeat value="" var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;"/>
                    </ui:repeat>
                     <ui:repeat value="" var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>
                 <ui:repeat value=""
 var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>        
	  <ui:repeat value="#{utils.isArabic() ? purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesName : purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesNameEn}" var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>
	  <ui:repeat value="#{utils.isArabic() ? purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesName : purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesNameEn}"
 var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat> 
                   
                 <ui:repeat value="#{materialsMB.main}"
 var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>    
                     <ui:repeat value="" var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>
	  <ui:repeat value="#{utils.isArabic() ? purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesName : purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesNameEn}" var="year">

                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat> 
                          
                 <ui:repeat value="#{purchaseOrderMB.main}"
 var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>    
     	  <ui:repeat value="#{utils.isArabic() ? purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesName : purchaseOrderMB.purchaseOrder.definitionOfCurrencies.definitionOfCurrenciesNameEn}" var="year">

                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>           
                          
                 <ui:repeat value="#{purchaseOrderMB.main}"
 var="year">
                        <p:column headerText="#{year}" style="border:hidden;font-size: 12px ;font-weight:bold ;color: Gray;" />
                    </ui:repeat>    
                    
                </p:row>
            </p:columnGroup>
								
								
											   
                    <p:column headerText="#" width="20" style="border:hidden;" >
					
												<h:outputText value="#{index+1}" />
									
               						
					
											</p:column>
				
											 <p:columnGroup type="header">
                <p:row>
                    <p:column colspan="#{index+1}" headerText="#" style="border:hidden;"/>
                </p:row>
                <p:row>
                    <ui:repeat value="#{index+1}" var="year">
                        <p:column  style="border:hidden;"/>
                    </ui:repeat>
                </p:row>
            </p:columnGroup>
											
					<p:column headerText="#{msg['Item']}" width="90" style="border:hidden;"  >
												<p:selectOneMenu  required="true"
													converter="omnifaces.SelectItemsConverter" filter="true" filterMatchMode="contains" id="agents" value="#{det.itemsScreen}"
													style="margin-bottom:10px;" styleClass="Wid100">
														<p:ajax event="change" process="@this" update="tblSheet8" />
													<f:selectItem  itemLabel="#{msg['select']}" />
													<f:selectItems value="#{purchaseOrderDetailsMB.itemsScreenList}" 
													var="itemsScreen" itemLabel="#{itemsScreen.nameItem}" itemValue="#{itemsScreen}"/>
												</p:selectOneMenu>
											</p:column>
								
										
							
							<p:column headerText="#{msg['Quantity']}" width="70" style="border:hidden;" >
							<p:inputNumber value="#{det.quantity}"/>
							</p:column>	
							
						<p:column headerText="#{msg['Unit_Price']}" width="100" style="border:hidden;" >
								<p:selectOneMenu  
													converter="omnifaces.SelectItemsConverter" filter="true" filterMatchMode="contains" id="unit" value="#{det.units}"
													style="margin-bottom:10px;" >
													<f:selectItem  itemLabel="#{msg['select']}" />
													
													<f:selectItems value="#{purchaseOrderDetailsMB.unitList}" 
													var="unit" itemLabel="#{unit.unitName}" itemValue="#{unit}"  >
													
													</f:selectItems>
												</p:selectOneMenu>
											
							</p:column>	
							<p:column headerText="#{msg['Unit_cost']}" width="50" style="border:hidden;" >
							<p:inputNumber value="#{det.costUnit}"/>
							</p:column>
							
								
								<p:column headerText="#{msg['Gross_cost_before_tax']}" width="70" style="border:hidden;" >
							<h:outputText value="#{det.initialValueBeforeTax}">
														 <f:convertNumber pattern="###,###.##"/>
							</h:outputText>
							
							</p:column>	
								
									<p:column headerText="#{msg['Gross_cost_before_tax']}" width="70" style="border:hidden;" >
							<h:outputText value="#{det.valueBeforeTax}">
														 <f:convertNumber pattern="###,###.##"/>
							</h:outputText>
							
							</p:column>	
							<p:column headerText="#{msg['Tax_Rate']}" width="100" style="border:hidden;" >
								<p:selectOneMenu  
													converter="omnifaces.SelectItemsConverter" filter="true" filterMatchMode="contains" id="agents12" value="#{det.definitionOfTax}"
													style="margin-bottom:10px;" >
													<f:selectItem  itemLabel="#{msg['select']}" />
													
													<f:selectItems value="#{purchaseOrderMB.definitionOfTaxList}" 
													var="definitionOfTax" itemLabel="#{definitionOfTax.taxAmount}" itemValue="#{definitionOfTax}"  >
													
													</f:selectItems>
												</p:selectOneMenu>
											
							</p:column>	
							
						<p:column headerText="#{msg['Tax_amount']}" width="50" style="border:hidden;" >
							<h:outputText value="#{det.initialTaxAmount}">
							 <f:convertNumber pattern="###,###.##"/>
							</h:outputText>
									
							</p:column>	
							<p:column headerText="#{msg['Tax_amount']}" width="50" style="border:hidden;" >
							<h:outputText value="#{det.taxAmount}">
							 <f:convertNumber pattern="###,###.##"/>
							</h:outputText>
									
							</p:column>	
									<p:column headerText="#{msg['Gross_cost']}" width="50" style="border:hidden;" >
							<h:outputText value="#{det.initialTotal}">
							                <f:convertNumber pattern="###,###.##"/>
							</h:outputText>
							</p:column>
								<p:column headerText="#{msg['Gross_cost']}" width="50" style="border:hidden;" >
							<h:outputText value="#{det.total}">
							                <f:convertNumber pattern="###,###.##"/>
							</h:outputText>
							</p:column>
							
					
								<p:column   headerText="#{msg['Delete']}"  width="30" style="border:hidden;" >
								
												<p:commandButton  styleClass="red-btn" action="#{purchaseOrderMB.delete(det)}"  process="@this" update="@form" icon="ui-icon-delete">
													<p:confirm header="#{msg['glopal.confirmation']}" message="#{msg['glopal.are_sure']}" icon="ui-icon-alert" />
												</p:commandButton>

											</p:column >	
										




							</p:dataTable>

						</p:panelGrid>
					</div>

					<br></br> <br></br>


					<div style="display: flex; justify-content: space-between;">

						

						<p:panelGrid columns="6" id="pnl1233" styleClass="no-border"
							rendered="#{purchaseOrderMB.purchaseOrder.commodityServices eq 2 }">
							<div
								style="box-shadow: 3px 3px 3px 3px #888888; display: grid; width: 510px">
								<table cellpadding="4" cellspacing="0"
									style='border-collapse: collapse; border: none'>

									<tr>
										<td style="font-weight: bolder;">#{msg['Total_before_tax']}
											:</td>
										<td><h:outputLabel
												value="#{purchaseOrderMB.addPurchaseOrderList.stream().map(s->s.valueBeforeTax).sum()}">
												<f:convertNumber pattern="###,###.##" />
												<p:spacer width="20" height="20" />

												<h:outputLabel value="#{purchaseOrderMB.main}">

												</h:outputLabel>

											</h:outputLabel></td>

									</tr>


									<tr>
										<td style="font-weight: bolder;">#{msg['Tax']} </td>
										<td><h:outputLabel
												value="#{purchaseOrderMB.addPurchaseOrderList.stream().map(s->s.taxAmount).sum()}">

												<f:convertNumber pattern="###,###.##" />



												<h:outputLabel value="#{purchaseOrderMB.main}">


												</h:outputLabel>

											</h:outputLabel></td>
									</tr>
									<tr>
										<td style="font-weight: bolder;"><h:outputLabel
												rendered="#{utils.getVersion() eq 'EGY'}">

												<label><b>
														#{msg['discountTax_'+=utils.getVersion()]} </b> :</label>
											</h:outputLabel></td>
										<td><p:selectOneMenu
												converter="omnifaces.SelectItemsConverter" filter="true"
												filterMatchMode="contains" id="agents"
												value="#{purchaseOrderMB.purchaseOrder.discountTax}"
												style="margin-bottom:10px;" styleClass="Wid40"
												rendered="#{utils.getVersion() eq 'EGY'}">
												<f:selectItem itemLabel="   Ù†Ø³Ø¨Ø© Ø¶Ø±ÙŠØ¨Ø©     " />

												<f:selectItems value="#{purchaseOrderMB.discountTaxList}"
													var="comercialProfitTax"
													itemLabel="#{comercialProfitTax.taxAmount}"
													itemValue="#{comercialProfitTax}" />

											</p:selectOneMenu></td>

									</tr>
									
								<tr>
										<td style="font-weight: bolder;"> 
										<h:outputLabel
												rendered="#{utils.getVersion() eq 'EGY'}"
												value="#{purchaseOrderMB.purchaseOrder.totaldiscountTax}">

												<h:outputLabel value="#{purchaseOrderMB.main}">
												</h:outputLabel>
											</h:outputLabel>
											</td>

									</tr>

									<tr>
										<td style="font-weight: bolder;">#{msg['total1']}</td>
										<td><h:outputLabel
												value="#{purchaseOrderMB.purchaseOrder.totalFinal}">
												<f:convertNumber pattern="###,###.##" />
												<h:outputLabel value="#{purchaseOrderMB.main}">
												</h:outputLabel>

											</h:outputLabel></td>
									</tr>
									<tr>
										<td style="font-weight: bolder;">#{msg['totalWritten']}</td>
										<td><h:inputText value="#{purchaseOrderMB.purchaseOrder.totalCharacters}"
												style=" border: 2px solid #888888;">
											</h:inputText></td>

									</tr>
								</table>
							</div>
						</p:panelGrid>
						
						<p:panelGrid columns="6" id="pnl1243" styleClass="no-border"
							rendered="#{purchaseOrderMB.purchaseOrder.commodityServices eq 1}">
							<div
								style="box-shadow: 3px 3px 3px 3px #888888; display: grid; width: 510px">
								<table cellpadding="4" cellspacing="0"
									style='border-collapse: collapse; border: none'>

									<tr>
										<td style="font-weight: bolder;">#{msg['Total_before_tax']}
											:</td>
										<td><h:outputLabel
												value="#{purchaseOrderMB.addPurchaseOrderList.stream().map(s->s.valueBeforeTax).sum()}">
												<f:convertNumber pattern="###,###.##" />
												<p:spacer width="20" height="20" />

												<h:outputLabel value="#{purchaseOrderMB.main}">

												</h:outputLabel>

											</h:outputLabel></td>

									</tr>
									
									<tr>
										<td style="font-weight: bolder;">#{msg['Tax']}
											:</td>
										<td><h:outputLabel
												value="#{purchaseOrderMB.addPurchaseOrderList.stream().map(s->s.taxAmount).sum()}">
												<f:convertNumber pattern="###,###.##" />
												<p:spacer width="20" height="20" />

												<h:outputLabel value="#{purchaseOrderMB.main}">

												</h:outputLabel>

											</h:outputLabel></td>

									</tr>
									<tr>
										<td style="font-weight: bolder;"><h:outputLabel
												rendered="#{utils.getVersion() eq 'EGY'}">

												<label><b>
														#{msg['discountTax_'+=utils.getVersion()]} </b> :</label>
											</h:outputLabel></td>
										<td><p:selectOneMenu
												converter="omnifaces.SelectItemsConverter" filter="true"
												filterMatchMode="contains" id="agents3"
												value="#{purchaseOrderMB.purchaseOrder.discountTax}"
												style="margin-bottom:10px;" styleClass="Wid40"
												rendered="#{utils.getVersion() eq 'EGY'}">
												<f:selectItem itemLabel="   Ù†Ø³Ø¨Ø© Ø¶Ø±ÙŠØ¨Ø©     " />

												<f:selectItems value="#{purchaseOrderMB.discountTaxList}"
													var="comercialProfitTax"
													itemLabel="#{comercialProfitTax.taxAmount}"
													itemValue="#{comercialProfitTax}" />

											</p:selectOneMenu></td>

									</tr>
									
								<tr>
										<td style="font-weight: bolder;"><h:outputLabel
												rendered="#{utils.getVersion() eq 'EGY'}"
												value="#{purchaseOrderMB.purchaseOrder.totaldiscountTax}">

												<h:outputLabel value="#{purchaseOrderMB.main}">
												</h:outputLabel>
											</h:outputLabel></td>

									</tr>

									<tr>
										<td style="font-weight: bolder;">#{msg['total1']}</td>
										<td><h:outputLabel
												value="#{purchaseOrderMB.purchaseOrder.totalFinal}">
												<f:convertNumber pattern="###,###.##" />
												<h:outputLabel value="#{purchaseOrderMB.main}">
												</h:outputLabel>

											</h:outputLabel></td>
									</tr>
									<tr>
										<td style="font-weight: bolder;">#{msg['totalWritten']}</td>
										<td><h:inputText value="#{purchaseOrderMB.purchaseOrder.totalCharacters}"
												style=" border: 2px solid #888888;">
											</h:inputText></td>

									</tr>
								</table>
							</div>
						</p:panelGrid>
					</div>



					<br></br> <br></br>
					<div
						style="box-shadow: 3px 3px 3px 3px #888888; width: 460px; display: grid">
						<table cellpadding="4" cellspacing="0"
							style='border-collapse: collapse; border: none'>
							<tr
								style="background-color: #e0e0e0; padding: 0.5em; font-weight: bolder;">
								<td width="200">#{msg['addText']}</td>

								<td><p:selectOneMenu id="billManagement1"
										value="#{purchaseOrderMB.purchaseOrder.billManagement}"
										style="margin-bottom:10px;"
										converter="omnifaces.SelectItemsConverter" filter="true"
										filterMatchMode="contains" multiple="true">
										<p:ajax event="change" process="@this"
											update="@parent:billManagement" />


										<f:selectItem itemLabel="#{msg['select']}" itemValue="" />
										<f:selectItem itemLabel="addNew +"
											itemValue="#{purchaseOrderMB.addBillManagement}" />

										<f:selectItems
											value="#{purchaseOrderDetailsMB.billManagementList}"
											var="billManagement"
											itemLabel="#{billManagement.billManagementTitle}" />
										<p:ajax event="itemSelect"
											listener="#{purchaseOrderMB.addBillManagement}">
										</p:ajax>

									</p:selectOneMenu></td>

							</tr>

							<tr>
								<td>#{msg['text']}:</td>

								<td><h:outputLabel id="billManagement"
										value="#{utils.isArabic() ?purchaseOrderMB.purchaseOrder.billManagement.noteBillManagementAr:purchaseOrderMB.purchaseOrder.billManagement.noteBillManagementEn}">
									</h:outputLabel></td>
							</tr>

						</table>

					</div>


					<br></br> <br></br>
					<p:panelGrid columns="3" styleClass="ui-noborder Wid120">

						<p:commandButton value="#{msg['save_btn']}" icon="ui-icon-save"
							style="width:auto; border-radius:20px;background-color:#888888"
							action="#{purchaseOrderMB.savePurchaseBills()}" process="@form"
							update="@form"  disabled="#{purchaseOrderMB.purchaseOrder.closeMonth eq 1}">

						</p:commandButton>
						<p:commandButton id="esrr" styleClass="printBtn disNone"
							icon="ui-icon-print"
							style="width:auto;border-radius:20px;background-color:#888888"
							value="#{msg['print']}" onclick="PF('Panel').hide()"
							oncomplete="$('.printBtn').click()">
							<p:printer target="print" />
						</p:commandButton>
						<p:commandButton value="#{msg['Main_list']}" icon="ui-icon-cancel"
							style="width:auto;border-radius:20px;background-color:#888888"
							process="@this" update="@this"
							action="#{purchaseOrderMB.cancelAction()}" />

						<p:dialog resizable="false" height="45vh" width="450px"
							modal="true" showHeader="false" widgetVar="uploadDocument"
							closeOnEscape="true" dynamic="true">

							<p:spacer height="10" width="100%"></p:spacer>
							<center>
								<h:panelGroup columns="2" id="p" layout="block"
									styleClass="no-border Wid70 MarAuto">

									<p:outputLabel style="font-size: 17px;"
										value="#{msg['Do_you_want_to_download_an_attachment']}"></p:outputLabel>
									<p:spacer height="10" width="100%"></p:spacer>

									<p:fileUpload rendered="#{purchaseOrderMB.purchaseOrder.id ne null}"
										fileUploadListener="#{purchaseOrderMB.uploadDocument}"
										mode="advanced" label="#{msg['attached']}" auto="true"
										allowTypes="/(\.|\/)(gif|jpg|jpe?g|png|doc|docx|xls|xlsx|pdf|ppt|pptx)$/i"
										uploadLabel="#{msg['attached']}"
										cancelLabel="#{msg['Cancel']}">
									</p:fileUpload>

									<p:commandButton value="#{msg['no']}" style="width:auto"
										action="#{purchaseOrderMB.cancelAction()}" process="@form"
										update="@form" >

									</p:commandButton>


								</h:panelGroup>
							</center>
						</p:dialog>
						<p:dataTable rendered="#{purchaseOrderMB.purchaseOrder.id ne null}"
							reflow="true" emptyMessage="#{msg['noRecord']}" id="document"
							var="doc" styleClass="txt-center"
							value="#{purchaseOrderMB.documentList}">

							<p:column>
								<p:link value="#{doc.documentName}" type="button"
									onclick="window.open('/#{utils.getReportPath()}/#{doc.office.id}#{doc.company.id}/#{doc.documentName}');" />
							</p:column>


						</p:dataTable>
					</p:panelGrid>
					<h:panelGroup id="cc" layout="block"
						styleClass="no-border Wid70 MarAuto">


						<p:dialog header="edit" width="800" height="600" widgetVar="Panel">
							<ui:include src="review/purchaseOrder_review.xhtml" />
						</p:dialog>
					</h:panelGroup>
				</div>
				<div></div>
			</div>
		</div>




	</composite:implementation>
</body>
</html>
